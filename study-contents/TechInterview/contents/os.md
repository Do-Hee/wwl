# 3. Operating System
## 📖 Contents
- 프로세스와 스레드의 차이(Process vs Thread)
- 멀티 프로세스 대신 멀티 스레드를 사용하는 이유
- Thread-safe
- 동기화 객체의 종류
- 뮤텍스와 세마포어의 차이
- 스케줄러
- 동기와 비동기
- 프로세스 동기화
- 메모리 관리 전략
- 가상 메모리
- 캐시의 지역성
- 교착상태(데드락, Deadlock)의 개념과 조건
- 사용자 수준 스레드와 커널 수준 스레드
- 외부 단편화와 내부 단편화
- Context Switching
- Swapping

---
## 프로세스, 스레드 차이
#### 프로세스(Process)
- 컴퓨터에서 연속적으로 실행되고 있는 프로그램
- 하나의 프로세스에는 최소 하나의 스레드(메인 스레드) 존재
  - 추가 스레드를 생성하지 않을 경우 메인 스레드에서 작업 수행

#### 스레드 (Thread)
- 프로세스 내에서 실행되는 여러 흐름의 단위

#### 프로세스 vs 스레드
||프로세스|스레드|
|----|----|----|
|개념|운영체제로부터 자원을 할당받는 작업의 단위|프로세스가 할당받은 자원을 이용하는 실행의 단위|
|메모리 구조|<img src="./resources/process.png" style="width: 400px;" alt="process"><br>각각 독립된 메모리 영역|<img src="./resources/thread.png" style="width: 400px;" alt="thread"><br>프로세스 내에서 Stack을 따로 할당|
|할당 자원|CPU 시간<br/>운영에 필요한 주소 공간<br/>Code, Data, Stack, Heap구조의 독립된 메모리 영역|Stack|
|공유 자원|없음|Code, Data, Heap|
|통신 방법|- 각 프로세스는 별도의 주소 공간에서 실행<br/>- 다른 프로세스의 자원에 접근하려면 프로세스간 통신 사용<br/>ex. 파이프, 파일, 소켓 등|같은 프로세스 내 주소공간이나 자원을 공유하면서 실행|

---
## 멀티 프로세스, 멀티 스레드 비교
#### 멀티 프로세스
- 하나의 응용 프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 하나의 작업을 처리하도록 하는 것

  ##### 장점
  - 여러 자식 프로세스 중 하나에 문제 발생 시, 해당 프로세스 외 다른 영향 확산 방지 가능
  ##### 단점
  - 잦은 [Context switching](https://nesoy.github.io/articles/2018-11/Context-Switching) 발생 시, 오버헤드 발생 가능성
  - 프로세스는 공유 자원이 없기 때문에 Context switching 발생 시 모든 데이터(CPU 레지스터 교체, RAM과 CPU간 캐시 메모리) 리셋 후 다른 프로세스 실행

#### 멀티 스레드
- 하나의 응용프로그램을 여러 개의 스레드로 구성하고, 각 스레드가 하나의 작업을 처리하도록 하는 것
- ex. 웹 서버

  ##### 장점
  - 공유 메모리로 인해 프로세스 간 통신에 비해 효율 증가
    - 프로세스를 생성하여 자원을 할당하는 시스템 콜이 감소하여 효율적인 자원 관리 가능
    - 시스템 처리 비용 감소
    - 프로그램 응답 시간 단축
  ##### 단점
  - 스레드 간 자원 공유는 전역 변수를 사용하기 때문에 동기화 문제 주의 필요
    - 주의 깊은 설계
    - 까다로운 디버깅
  - 한 스레드에 문제 발생 시 전체 프로세스에 영향

#### 멀티 프로세스 vs 멀티 스레드
- 전자는 여러 프로그램을 실행시켜 작업 수행, 후자는 한 프로그램 내에서 여러 작업 수행
- 멀티 프로세스 대신 멀티 스레드를 사용하는 이유?
  - 멀티 스레드 장점과 동일

### Reference
- [프로세스와 스레드의 차이](https://brunch.co.kr/@kd4/3)
- [[OS] 프로세스와 스레드의 차이](https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html)
